# Prompt 优化 IDE
## [gpt-prompt-engineer](https://github.com/mshumer/gpt-prompt-engineer)


gpt-prompt-engineer 是一个根据需求，生成优化过的 prompt 的开源项目。

背景是：写 prompt 有点像炼金术。没有明确的方法来预测什么是最有效的。这一切都是关于实验，直到找到正确的 prompt。

gpt-prompt-engineer 做的就是根据任务描述和一些测试用例来生成一些 prompt。从这些 prompt 中找到最优的 prompt。

### 实现概述
实现包括两部分：
1. 生成若干 Prompt。
2. Prompt 评估。找到最好的哪个。

#### 1 生成 Prompt
生成 prompt 的 prompt：
```
system_gen_system_prompt = """Your job is to generate system prompts for GPT-4, given a description of the use-case and some test cases.
The prompts you will be generating will be for freeform tasks, such as generating a landing page headline, an intro paragraph, solving a math problem, etc.
In your generated prompt, you should describe how the AI should behave in plain English. Include what it will see, and what it's allowed to output. Be creative with prompts to get the best possible results. The AI knows it's an AI -- you don't need to tell it this.
You will be graded based on the performance of your prompt... but don't cheat! You cannot include specifics about the test cases in your prompt. Any prompts with examples will be disqualified.
Most importantly, output NOTHING but the prompt. Do not include anything else in your message."""
```

生成 Prompt 的代码：
```
outputs = openai.ChatCompletion.create(
  model=CANDIDATE_MODEL, # change this to gpt-3.5-turbo if you don't have GPT-4 access
  messages=[
      {"role": "system", "content": system_gen_system_prompt},
      {"role": "user", "content": f"Here are some test cases:`{test_cases}`\n\nHere is the description of the use-case: `{description.strip()}`\n\nRespond with your prompt, and nothing else. Be creative."}
      ],
  temperature=CANDIDATE_MODEL_TEMPERATURE,
  n=number_of_prompts)
```

### 2 Prompt 评估
评估用上面的 Prompt 生成的内容，来找到最优的 Prompt。评估方法用的 ELO 的评级系统：
>  Each prompt starts with an ELO rating of 1200. As they compete against each other in generating responses to the test cases, their ELO ratings change based on their performance. This way, you can easily see which prompts are the most effective.

根据 Prompt 生成内容的 prompt 如下：
```
ranking_system_prompt = """Your job is to rank the quality of two outputs generated by different prompts. The prompts are used to generate a response for a given task.
You will be provided with the task description, the test prompt, and two generations - one for each system prompt.
Rank the generations in order of quality. If Generation A is better, respond with 'A'. If Generation B is better, respond with 'B'.
Remember, to be considered 'better', a generation must not just be good, it must be noticeably superior to the other.
Also, keep in mind that you are a very harsh critic. Only rank a generation as better if it truly impresses you more than the other.
Respond with your ranking, and nothing else. Be fair and unbiased in your judgement."""
```

## [ChainForge](https://github.com/ianarawjo/ChainForge)
> An open-source visual programming environment for battle-testing prompts to LLMs.

同一个 Prompt，度量不同模型的输出结果。